Dimit设计思考
=====================
零散的思考

## Dimit特性
- 错误检测
- 质量分析
- 多种限流机制，基于限流表达式
    - TPS总和限流
    - 总数
- 自动降级
- 自动切换
    - 故障切换
    - 主备切换
- 自动恢复
- 自定义处理
    - 告警
- dashboard
    - 配置UI
    - 分析显示
    - 手动调节负载

## TPS限流 -> 全局限流 vs. 总和限流
- 全局限流
    - 优点
        - 限流控制精确
    - 缺点
        - 记录TPS需要全局计数器(如redis), 增加网络开销
        - 服务故障/重启, 部分机器负载过大
- 总和限流
    - 优点
        - TPS分摊到集群每一台单机本地限流
        - 有效隔离故障/发布等引起的单机负载过大
    - 缺点
        - 若集群负载不均, 可能TPS的实际限流值将小于允许值。 // TODO
- Dimit使用总和限流
    - 

## ZooKeeper vs. Consul
    - 


## 多语言支持
- 配置信息通过protobuf序列化，实现跨语言
- 定义限流的操作流程协议 //TODO 

## gRPC

## IO交互方式
- 同步发送
- 异步发送
- 同步接收
- 拉取（comet）

## 检测 分析 告警 切换
通道发送返回码     ->  发送成功率  严重错误告警 成功率低于95%告警
通道接收返回码     ->  接通成功率  成功率低于40%告警 接通率低于50%告警
发送响应时间         ->  发送效率 响应时间低于30ms告警
发送接收时间差     ->  状态报告延迟率 超时未返回报告告警
       
        

    
